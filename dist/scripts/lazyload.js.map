{"version":3,"sources":["../../scripts/lazyload.js"],"names":["lazyload","images","imgs","slice","call","window","addEventListener","scrollEvent","length","removeEventListener","filter","img","classList","contains","forEach","inViewport","loadImage","getBoundingClientRect","top","right","bottom","left","vpWidth","document","documentElement","clientWidth","vpHeight","clientHeight","image","Image","src","dataset","onload","remove"],"mappings":";;AAAA,SAASA,QAAT,CAAkBC,MAAlB,EAAyB;AACrB,QAAIC,OAAO,GAAGC,KAAH,CAASC,IAAT,CAAcH,MAAd,CAAX;;AAEAI,WAAOC,gBAAP,CAAwB,QAAxB,EAAiCC,WAAjC;;AAEA,aAASA,WAAT,GAAuB;AACnB,YAAG,CAACL,KAAKM,MAAT,EAAiB;AACb,mBAAOH,OAAOI,mBAAP,CAA2B,QAA3B,EAAoCF,WAApC,CAAP;AACH;AACDL,eAAOA,KAAKQ,MAAL,CAAY;AAAA,mBAAOC,IAAIC,SAAJ,CAAcC,QAAd,CAAuB,UAAvB,CAAP;AAAA,SAAZ,CAAP;AACAX,aAAKY,OAAL,CAAa,eAAO;AAChB,gBAAGC,WAAWJ,GAAX,CAAH,EAAoB;AAChBK,0BAAUL,GAAV;AACH;AACJ,SAJD;AAKH;AACJ;;AAED,SAASI,UAAT,CAAoBJ,GAApB,EAAwB;AAAA,gCACaA,IAAIM,qBAAJ,EADb;AAAA,QACfC,GADe,yBACfA,GADe;AAAA,QACVC,KADU,yBACVA,KADU;AAAA,QACHC,MADG,yBACHA,MADG;AAAA,QACKC,IADL,yBACKA,IADL;;AAEpB,QAAIC,UAAUC,SAASC,eAAT,CAAyBC,WAAvC;AACA,QAAIC,WAAWH,SAASC,eAAT,CAAyBG,YAAxC;AACA,WACI,CAACT,MAAM,CAAN,IAAWA,MAAMQ,QAAjB,IAA6BN,SAAS,CAAT,IAAcA,SAASM,QAArD,MACCL,OAAO,CAAP,IAAYA,OAAOC,OAAnB,IAA8BH,QAAQ,CAAR,IAAaA,QAAOG,OADnD,CADJ;AAIH;;AAED,SAASN,SAAT,CAAmBL,GAAnB,EAAuB;AACnB,QAAIiB,QAAQ,IAAIC,KAAJ,EAAZ;AACAD,UAAME,GAAN,GAAYnB,IAAIoB,OAAJ,CAAYD,GAAxB;AACAF,UAAMI,MAAN,GAAe,YAAU;AACrBrB,YAAImB,GAAJ,GAAUF,MAAME,GAAhB;AACAnB,YAAIC,SAAJ,CAAcqB,MAAd,CAAqB,UAArB;AACH,KAHD;AAIH","file":"lazyload.js","sourcesContent":["function lazyload(images){\r\n    let imgs = [].slice.call(images)\r\n\r\n    window.addEventListener(\"scroll\",scrollEvent)\r\n\r\n    function scrollEvent() {\r\n        if(!imgs.length) {\r\n            return window.removeEventListener(\"scroll\",scrollEvent)\r\n        }\r\n        imgs = imgs.filter(img => img.classList.contains(\"lazyload\"))\r\n        imgs.forEach(img => {\r\n            if(inViewport(img)) {\r\n                loadImage(img)\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nfunction inViewport(img){\r\n    let {top, right, bottom, left} = img.getBoundingClientRect()\r\n    let vpWidth = document.documentElement.clientWidth\r\n    let vpHeight = document.documentElement.clientHeight\r\n    return (\r\n        (top > 0 && top < vpHeight || bottom > 0 && bottom < vpHeight) &&\r\n        (left > 0 && left < vpWidth || right > 0 && right< vpWidth)\r\n    )\r\n}\r\n\r\nfunction loadImage(img){\r\n    let image = new Image()\r\n    image.src = img.dataset.src\r\n    image.onload = function(){\r\n        img.src = image.src\r\n        img.classList.remove(\"lazyload\")\r\n    }\r\n}"]}