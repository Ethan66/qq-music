{"version":3,"sources":["../server.js"],"names":["express","require","request","cors","app","HEADERS","use","get","req","res","url","Date","json","headers","e","error","message","query","keyword","page","encodeURIComponent","listen"],"mappings":";;AAAA,IAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACA,IAAMC,UAAUD,QAAQ,iBAAR,CAAhB;AACA,IAAME,OAAOF,QAAQ,MAAR,CAAb;AACA,IAAMG,MAAMJ,SAAZ;;AAEA,IAAMK,UAAU;AACZ,iBAAa,YADD;AAEZ,cAAU,oBAFE;AAGZ,eAAW,qBAHC;AAIZ,kBAAc;AAJF,CAAhB;;AAOAD,IAAIE,GAAJ,CAAQH,MAAR;;AAEAC,IAAIG,GAAJ,CAAQ,GAAR,EAAa,gBAAOC,GAAP,EAAWC,GAAX,EAAkB;AAC3B,QAAMC,6LAA2L,CAAC,IAAIC,IAAJ,EAAlM;AACA,QAAG;AACCF,YAAIG,IAAJ,EAAS,MAAMV,QAAQ;AACnBQ,iBAAKA,GADc;AAEnBE,kBAAM,IAFa;AAGnBC,qBAASR;AAHU,SAAR,CAAf;AAKH,KAND,CAMC,OAAMS,CAAN,EAAQ;AACLL,YAAIG,IAAJ,CAAS;AACLG,mBAAOD,EAAEE;AADJ,SAAT;AAGH;AACJ,CAbD;;AAeAZ,IAAIG,GAAJ,CAAQ,SAAR,EAAkB,gBAAMC,GAAN,EAAUC,GAAV,EAAiB;AAAA,qBACHD,IAAIS,KADD;AAAA,QACxBC,OADwB,cACxBA,OADwB;AAAA,qCACfC,IADe;AAAA,QACfA,IADe,mCACR,CADQ;;AAE/B,QAAMT,4KAA0KU,mBAAmBF,OAAnB,CAA1K,iFAAiRC,IAAjR,mCAAmT,CAAC,IAAIR,IAAJ,EAA1T;AACA,QAAG;AACCF,YAAIG,IAAJ,EAAS,MAAMV,QAAQ;AACnBQ,iBAAKA,GADc;AAEnBE,kBAAM,IAFa;AAGnBC,qBAASR;AAHU,SAAR,CAAf;AAKH,KAND,CAMC,OAAMS,CAAN,EAAQ;AACLL,YAAIG,IAAJ,CAAS;AACLG,mBAAOD,EAAEE;AADJ,SAAT;AAGH;AACJ,CAdD;;AAgBAZ,IAAIiB,MAAJ,CAAW,IAAX;;AAEA","file":"server.js","sourcesContent":["const express = require(\"express\")\r\nconst request = require(\"request-promise\")\r\nconst cors = require(\"cors\")\r\nconst app = express()\r\n\r\nconst HEADERS = {\r\n    \"authority\": \"c.y.qq.com\",\r\n    \"origin\": \"https://m.y.qq.com\",\r\n    \"referer\": \"https://m.y.qq.com/\",\r\n    \"user-agent\": \"Mozilla/5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1\"\r\n}\r\n\r\napp.use(cors())\r\n\r\napp.get('/', async (req,res) =>{\r\n    const url = `https://c.y.qq.com/musichall/fcgi-bin/fcg_yqqhomepagerecommend.fcg?g_tk=840115334&uin=425734130&format=json&inCharset=utf-8&outCharset=utf-8&notice=0&platform=h5&needNewCode=1&_=${+new Date()}`\r\n    try{\r\n        res.json(await request({\r\n            url: url,\r\n            json: true,\r\n            headers: HEADERS\r\n        }))\r\n    }catch(e){\r\n        res.json({\r\n            error: e.message\r\n        })\r\n    }\r\n})\r\n\r\napp.get('/search',async(req,res) =>{\r\n    const {keyword, page = 1} = req.query\r\n    const url = `https://c.y.qq.com/soso/fcgi-bin/search_for_qq_cp?g_tk=840115334&uin=425734130&format=json&inCharset=utf-8&outCharset=utf-8&notice=0&platform=h5&needNewCode=1&w=${encodeURIComponent(keyword)}&zhidaqu=1&catZhida=1&t=0&flag=1&ie=utf-8&sem=1&aggr=0&perpage=20&n=20&p=${page}&remoteplace=txt.mqq.all&_=${+new Date()}`\r\n    try{\r\n        res.json(await request({\r\n            url: url,\r\n            json: true,\r\n            headers: HEADERS\r\n        }))\r\n    }catch(e){\r\n        res.json({\r\n            error: e.message\r\n        })\r\n    }\r\n})\r\n\r\napp.listen(4000)\r\n\r\n//  curl 'https://c.y.qq.com/soso/fcgi-bin/search_for_qq_cp?g_tk=840115334&uin=425734130&format=json&inCharset=utf-8&outCharset=utf-8&notice=0&platform=h5&needNewCode=1&w=%E6%9D%8E&zhidaqu=1&catZhida=1&t=0&flag=1&ie=utf-8&sem=1&aggr=0&perpage=20&n=20&p=1&remoteplace=txt.mqq.all&_=1519995879103' -H 'origin: https://m.y.qq.com' -H 'accept-encoding: gzip, deflate, br' -H 'accept-language: zh-CN,zh;q=0.9' -H 'user-agent: Mozilla/5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1' -H 'accept: application/json' -H 'referer: https://m.y.qq.com/' -H 'authority: c.y.qq.com' -H 'cookie: pgv_pvi=8577560576; yq_index=0; RK=BA1mmFFrO+; pac_uid=1_2064281269; aboutVideo_v=0; tvfe_boss_uuid=bc2945cab09fb14d; o_cookie=425734130; pgv_si=s792745984; ptisp=ctc; ptcz=0f8479f573892fc355567c607bb9cc8ca235b468849aed95e846eaee5f76d834; uin=o0425734130; skey=@sLBG8bueE; pt2gguin=o0425734130; yqq_stat=0; ts_refer=ADTAGmyqq; ts_uid=8672378250; pgv_info=ssid=s4509992225; pgv_pvid=3637322940' --compressed"]}